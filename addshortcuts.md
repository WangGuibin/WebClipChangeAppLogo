# RT: å¦‚ä½•ä¸ºè‡ªå·±çš„Appå¢åŠ æ·å¾„è‡ªå®šä¹‰æ‹“å±•

> è¿™ä¸æ˜¯ä¸€å¥ä¸¤å¥è¯èƒ½æè¿°æ¸…æ¥šçš„,æ‰€ä»¥ç›´æ¥è¿›å…¥ä¸€å›¾èƒœåƒè¨€æ¨¡å¼ ã€‚

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/1.png" style="zoom:50%;" />

 é¦–å…ˆæ·»åŠ `Target` æ‰¾åˆ°`Intent Extension` æ·»åŠ å°±å®Œäº‹å„¿äº†

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/2.png" style="zoom:50%;" />

ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥,å¼¹çª—çš„è¯å°±ç‚¹`Activited`,æ¥ä¸‹æ¥å†åˆ›å»º`SiriKit Intent Defintion File`

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/3.png)

èµ·åå­—æ²¡å•¥è®²ç©¶,ä¸€èˆ¬ä¸€ä¸ªé¡¹ç›®å°±ä¸€ä¸ªè¿™ç©æ„å„¿,é»˜è®¤çš„å°±å®Œäº‹å„¿äº† 

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/4.png)

è¿™é‡Œå¼€å§‹å°±æœ‰äº›æ“ä½œäº†,æ·»åŠ ä¸€ä¸ª`intent`é¡¹ç›® ,å¡«å†™å¦‚å›¾çš„ä¸€äº›è¡¨å•ä¿¡æ¯,å‹¾é€‰é‡è¦çš„å‡ é¡¹,æ·»åŠ è‡ªå®šä¹‰å‚æ•°ç­‰

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/5.png)

å¦‚æœéœ€è¦å›è°ƒå¤„ç†,å“åº”ç»“æœè¿™é‡Œä¹Ÿéœ€è¦å¡«å†™,åˆ›å»ºè¿”å›ç»“æœçš„å­—æ®µ/ç±»å‹,ç”Ÿæˆæ¨¡æ¿æ–‡ä»¶çš„æ—¶å€™ä¼šç”Ÿæˆå¯¹åº”çš„è¿”å›æ–¹æ³•

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/6.png)

ç¼–è¯‘åæŸ¥çœ‹å¦‚å›¾ä½ç½®,ç‚¹å‡»ç®­å¤´è¿›å»,å³å¯æŸ¥çœ‹ç”Ÿæˆçš„æ¨¡æ¿æ–‡ä»¶,åªæœ‰å¤´æ–‡ä»¶æŸ¥çœ‹APIæ¥å£(è‹¹æœä¸€è´¯çš„é—­æºä½œé£)

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/7.png)

çœ‹çœ‹ğŸ‘€ å°±è¿™å°±è¿™: 

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/8.png)

ç„¶åå°±å»æ‰¾åˆ°ä¸€å¼€å§‹åˆ›å»º`Target`è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶`IntentHandler.m`å»å®ç°å¯¹åº”çš„`intent`å¤„ç†

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/9.png)

æ¯ä¸ªintentçš„å¤„ç†,é£æ ¼æœ‰ç‚¹ç›¸ä¼¼,åªæ˜¯ç±»å‹ä¸åŒè€Œå·²,å¤§æ¦‚è¿™å°±æ˜¯æ¨¡æ¿æ–‡ä»¶çš„é­…åŠ›å§

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/10.png)

åˆ°è¿™ä¸€æ­¥å¤„ç†å®Œ,å°±å®Œäº‹äº†,ç„¶åå°±æ˜¯è¿è¡Œä¸»App,éªŒè¯ç»“æœäº†(æœ€å¥½æ˜¯å¸è½½é‡æ–°å®‰è£…)

è¿è¡ŒAppä¹‹å,æ‰“å¼€æ·å¾„App,æ–°å»ºä¸€ä¸ªå¿«æ·æŒ‡ä»¤,å¦‚å›¾: 

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/Xnip2020-11-28_11-12-49.png)

ç„¶åæ‰¾åˆ°è‡ªå·±å¼€å‘çš„App

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/Xnip2020-11-28_11-13-24.png)

é‚£å°±æ‹¿è¿™ä¸ª`å›¾æ ‡æ˜“å®¹æœ¯`[^1]æ¥ä¸¾ä¸ªä¾‹å­å§ 

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/Xnip2020-11-28_11-13-41.png)

å†™çš„ä¸€ä¸ªæ²™ç›’å­˜å‚¨,åŸºäº`NSUserDefaults`[^2]å®ç°çš„,å¦‚æœæƒ³è¦å¸è½½Appä¹Ÿèƒ½ä¸ä¸¢å¤±æ•°æ®,é‚£å®ç°æ–¹æ¡ˆåªèƒ½æ›´æ¢é’¥åŒ™ä¸²æˆ–è€…iCloudç­‰,ä½†æ˜¯è¿™ä¸ªæ“ä½œæ˜¯åŸºäºè¿™ä¸ªåº”ç”¨çš„,æˆ‘ä¹Ÿä¸å¸Œæœ›æˆ‘å¼€å‘çš„Appè¢«äººå¸è½½,è™½è¯´æœ‰ç‚¹æµæ°“æ“ä½œ,ä½†æ˜¯ä¸æƒ³ç”¨å°±åˆ«ç”¨çš„åŸåˆ™å°±æ˜¯è¿™ä¹ˆç®€å•ç²—æš´~ 

![](https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/Xnip2020-11-28_11-13-50.png)

è¿™ä¸ªæè¿°å°±æ˜¯ä¸€å¼€å§‹åˆ›å»º`Intent`æ—¶è¡¨å•é‡Œçš„`description`å­—æ®µ,æå‰ç¼–è¾‘å¥½å†copyè¿‡å»,æ’ç‰ˆä¼šå¥½çœ‹äº›.



å­˜å‚¨åŠŸèƒ½å±•ç¤º

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/Xnip2020-11-28_11-15-00.png" style="zoom:67%;" />

æŸ¥æ•°æ®

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/Xnip2020-11-28_11-15-33.png" style="zoom:67%;" />



å¼€å‘è¿™äº›æ“ä½œå…¶å®å¾ˆç®€å•,éƒ½æœ‰ç°æˆçš„è½®å­ç›´æ¥å¥—ç”¨è½¬æ¢å°±æ˜¯,æœ€ä¸ºå›°éš¾çš„åœ°æ–¹æ˜¯é™åˆ¶äºæƒ³æ³•,å¦‚æœæ²¡æœ‰ä¸€ä¸ªå¥½çš„æƒ³æ³•æˆ–è€…å®ç°æ–¹å¼è¿˜ä¸å¦‚ä¸å»åšå®ƒ.

ç»“åˆä¹‹å‰ç©æ·å¾„çš„ä¸€äº›ç»éªŒ,å¼€å‘äº†ä»¥ä¸‹å·¥å…·,æ¯”èµ·ä¹‹å‰å¯ä»¥æ›´æ–¹ä¾¿æ›´ä¾¿æ·~ 

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/IMG_3112.PNG" style="zoom:50%;" />

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/IMG_3109.PNG" style="zoom:50%;" />

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/IMG_3110.PNG" style="zoom:50%;" />

<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/IMG_3113.PNG" style="zoom:50%;" />



<img src="https://cdn.jsdelivr.net/gh/WangGuibin/MyFilesRepo/images/IMG_3111.PNG" style="zoom:50%;" />







æ•´ä½“å¼€å‘ä¸‹æ¥å¥½åƒæ²¡æœ‰ä»€ä¹ˆå¾ˆå›°éš¾çš„ä¸œè¥¿,åªä¸è¿‡å›½å†…ç›®å‰è¿˜å¾ˆå°‘å¯¹åº”çš„ä¸­æ–‡èµ„æ–™,åªèƒ½ç¡¬ç€å¤´çš®æ‰¾è‹±æ–‡èµ„æ–™å–ç»~ 

å‚è€ƒèµ„æ–™: 

- Alex Hay https://github.com/mralexhay/ShortcutsExample
- `Toolbox pro`çš„ä½œè€…çš„åšå®¢ [Adding Shortcuts To An App](https://toolboxpro.app/blog)



[^1]: è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªå¼€æºé¡¹ç›®,æ˜¯åŸºäºiOS14åˆ©ç”¨WebClipæŠ€æœ¯é€šè¿‡ç”ŸæˆmobileConfigæè¿°æ–‡ä»¶æ¥æ›¿æ¢åº”ç”¨å›¾æ ‡çš„ä¸€ç§å®ç°æ–¹æ¡ˆ,é¡¹ç›®åœ°å€[WebClipChangeAppLogo](https://github.com/WangGuibin/WebClipChangeAppLogo)
[^2]: appleå®˜æ–¹æ–‡æ¡£ [NSUserDefaults](https://developer.apple.com/documentation/foundation/nsuserdefaults)

